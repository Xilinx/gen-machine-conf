# Copyright (C) 2021-2022, Xilinx, Inc.  All rights reserved.
# Copyright (C) 2022, Advanced Micro Devices, Inc.  All rights reserved.
#
# SPDX-License-Identifier: MIT
#
microblaze:
    ip_type: processor
    hsm:
        config:
            CONFIG.C_FSL_LINKS:
                uboot_config: XILINX_FSL_LINKS
        define:
            IP_NAME:
                uboot_config: CONFIG_DM CONFIG_SYS_MALLOC_F CONFIG_SYS_GENERIC_BOARD
        define_chk_1:
            CONFIG.C_USE_DCACHE:
                uboot_config: CONFIG_DCACHE
            CONFIG.C_USE_ICACHE:
                uboot_config: CONFIG_ICACHE

# list for uboot config.mk file
# HW_VER USE_BARREL USE_DIV USE_HW_MUL USE_PCMP_INSTR USE_FPU
        config_chk_1_str:
            CONFIG.C_USE_BARREL:
                uboot_configmk: PLATFORM_CPPFLAGS += -mxl-barrel-shift
            CONFIG.C_USE_DIV:
                uboot_configmk: PLATFORM_CPPFLAGS += -mno-xl-soft-div
            CONFIG.USE_HW_MUL:
                uboot_configmk: PLATFORM_CPPFLAGS += -mno-xl-multiply-high
            CONFIG.C_USE_PCMP_INSTR:
                uboot_configmk: PLATFORM_CPPFLAGS += -mxl-pattern-compare
            CONFIG.C_USE_FPU:
                uboot_configmk: PLATFORM_CPPFLAGS += -mhard-float
        config1_chk_1_str:
            CONFIG.C_USE_HW_MUL:
                uboot_configmk: PLATFORM_CPPFLAGS += -mno-xl-soft-mul
        config_chk_0_str:
            CONFIG.C_USE_BARREL:
                uboot_configmk: PLATFORM_CPPFLAGS += -mno-xl-barrel-shift
            CONFIG.C_USE_DIV:
                uboot_configmk: PLATFORM_CPPFLAGS += -mxl-soft-div
            CONFIG.C_USE_HW_MUL:
                uboot_configmk: PLATFORM_CPPFLAGS += -mxl-soft-mul
            CONFIG.C_USE_PCMP_INSTR:
                uboot_configmk: PLATFORM_CPPFLAGS += -mno-xl-pattern-compare
        config_chk_2_str:
            CONFIG.C_USE_HW_MUL:
                uboot_configmk: PLATFORM_CPPFLAGS += -mxl-multiply-high
        config1_chk_2_str:
            CONFIG.C_USE_HW_MUL:
                uboot_configmk: PLATFORM_CPPFLAGS += -mno-xl-soft-mul
